<div class="listing-section">
    <div class="header-section">
        <p class="heading">Your listings</p>
    </div>
    
    <!-- Loading State -->
    <div *ngIf="loading" class="loading-state">
        Loading your listings...
    </div>

    <!-- Error State -->
    <div *ngIf="error" class="error-state">
        {{ error }}
    </div>

    <!-- Table -->
    <div class="table" *ngIf="!loading && !error">
        <p-table [value]="listings" [tableStyle]="{ 'min-width': '50rem' }" [paginator]="true" [rows]="10" responsiveLayout="'scroll'" [rowsPerPageOptions]="[5, 10, 20]" >
            <ng-template pTemplate="header">
                <tr>
                    <th>Property Type</th>
                    <th>Society Name</th>
                    <th>Locality</th>
                    <th>Floor</th>
                    <th>Rent (₹)</th>
                    <th>Deposit (₹)</th>
                    <th>Area (sq.ft)</th>
                    <th>Available From</th>
                    <th>Image</th>
                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-listing>
                <tr>
                    <td>{{ listing.property_type }}</td>
                    <td>{{ listing.society_name }}</td>
                    <td>{{ listing.locality }}</td>
                    <td>{{ listing.floor }}</td>
                    <td>{{ listing.rent }}</td>
                    <td>{{ listing.deposit }}</td>
                    <td>{{ listing.carpet_area }}</td>
                    <td>{{ listing.available_from | date:'mediumDate' }}</td>
                    <td>
                        <img *ngIf="listing.image_url" [src]="listing.image_url" alt="Property" class="property-image">
                        <span *ngIf="!listing.image_url">No image</span>
                    </td>
                </tr>
            </ng-template>
            <ng-template pTemplate="emptymessage">
                <tr>
                    <td colspan="9" class="text-center">No listings found</td>
                </tr>
            </ng-template>
        </p-table>
    </div>
</div>
